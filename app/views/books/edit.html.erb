<div class="form-container">
  <div class="form-wrapper">
    <h2>Kitap G√ºncelle</h2>
    
    <%= form_with model: @book, local: true, class: "book-form" do |form| %>
      <% if @book.errors.any? %>
        <div class="error-messages">
          <h4><%= pluralize(@book.errors.count, "hata") %> nedeniyle kitap g√ºncellenemedi:</h4>
          <ul>
            <% @book.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-group">
        <%= form.label :title, "Kitap Adƒ±:", class: "form-label" %>
        <%= form.text_field :title, class: "form-input", required: true %>
      </div>

      <div class="form-group">
        <%= form.label :author, "Yazar:", class: "form-label" %>
        <%= form.text_field :author, class: "form-input", required: true %>
      </div>

      <div class="form-group">
        <%= form.label :genre, "T√ºr:", class: "form-label" %>
        <%= form.text_field :genre, class: "form-input", required: true %>
      </div>

      <div class="form-group">
        <%= form.label :category, "Kategori:", class: "form-label" %>
        <%= form.text_field :category, class: "form-input", required: true %>
      </div>

      <div class="form-group">
        <%= form.label :year, "Yƒ±l:", class: "form-label" %>
        <%= form.number_field :year, class: "form-input", required: true %>
      </div>

      <div class="form-group">
        <%= form.label :page_count, "Sayfa Sayƒ±sƒ±:", class: "form-label" %>
        <%= form.number_field :page_count, class: "form-input", required: true %>
      </div>

      <div class="form-group image-upload-section">
        <label class="form-label">Kitap Resmi:</label>
        
        <% if @book.has_image? %>
          <div class="current-image">
            <p class="current-image-label">Mevcut Resim:</p>
            <% if @book.image.attached? %>
              <%= image_tag @book.image, class: "current-image-preview" %>
              <p class="image-source-info">üìÅ Y√ºklenen dosya</p>
            <% elsif @book.image_url.present? %>
              <%= image_tag @book.image_url, class: "current-image-preview" %>
              <p class="image-source-info">üîó URL: <%= @book.image_url %></p>
            <% end %>
          </div>
        <% end %>

        <div class="upload-option">
          <%= form.label :image, "üìÅ Yeni Resim Y√ºkle:", class: "upload-label" %>
          <%= form.file_field :image, 
              accept: "image/*", 
              class: "file-input",
              id: "image-upload",
              onchange: "previewImage(event)" %>
          <div id="image-preview" class="image-preview-container"></div>
        </div>

        <div class="upload-divider">
          <span>VEYA</span>
        </div>

        <div class="upload-option">
          <%= form.label :image_url, "üîó URL Deƒüi≈ütir:", class: "upload-label" %>
          <%= form.url_field :image_url, 
              class: "form-input", 
              placeholder: "https://example.com/resim.jpg" %>
          <small class="form-help">URL girerseniz, y√ºklenen dosya g√∂z ardƒ± edilir.</small>
        </div>
      </div>

      <div class="form-actions">
        <%= form.submit "G√ºncelle", class: "submit-btn" %>
        <%= link_to "ƒ∞ptal", @book, class: "cancel-btn" %>
      </div>
    <% end %>
  </div>
</div>